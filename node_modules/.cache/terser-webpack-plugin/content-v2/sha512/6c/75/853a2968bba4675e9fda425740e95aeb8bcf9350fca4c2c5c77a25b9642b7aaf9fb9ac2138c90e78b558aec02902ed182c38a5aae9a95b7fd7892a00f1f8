{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);new Date;let r=(new Date).toISOString().slice(0,10);document.getElementById(\"departureDate\").setAttribute(\"min\",r),document.getElementById(\"generate\").addEventListener(\"click\",(async function(){const e=document.getElementById(\"location\").value,t=document.getElementById(\"departureDate\").value,n=new Date(r),l=new Date(t),u=Math.abs(l-n),s=Math.ceil(u/864e5),p=await a(e);if(void 0!==p[0])if(\"\"===t)document.getElementById(\"error\").innerHTML=\"Please set your departure date correctly\";else if(s<7){const e=await o(p[0]);await c(\"/add\",{date:t,city:e.data[0].city_name,country:e.data[0].country_code,weather:e.data[0].weather.description,temp:e.data[0].temp,rh:Math.round(10*e.data[0].rh)/10,wind_spd:Math.round(10*e.data[0].wind_spd)/10}).then((function(e){d()}))}else{const e=await i(p[0]);console.log(e),await c(\"/add\",{date:t,city:e.city_name,country:e.country_code,weather:e.data[0].weather.description,temp:e.data[0].temp,precip:e.data[0].precip,rh:Math.round(10*e.data[0].rh)/10,wind_spd:Math.round(10*e.data[0].wind_spd)/10}).then((function(e){d()}))}document.getElementById(\"location\").value=\"\",document.getElementById(\"departureDate\").value=\"\"}));const a=async function(e){try{const t=await fetch(\"http://api.openweathermap.org/geo/1.0/direct?q=\"+e+\"&limit=1&appid=eb5a120ff7fc79e89928882f7c56d924\"),n=await t.json();if(!t.ok||0===n.length)throw document.getElementById(\"error\").innerHTML=\"Incorrect city name! Please double check the city name\",new Error(\"Bad response from server. Fail to get coordinate info\");return n}catch(e){console.log(\"Error: \"+e)}},o=async function(e){const t=await fetch(\"https://api.weatherbit.io/v2.0/current?lat=\"+e.lat.toString()+\"&lon=\"+e.lon.toString()+\"&key=c086327b5e2345ddb6a22055e7e275a8\");if(!t.ok)throw document.getElementById(\"error\").innerHTML=\"Unable to get weather info. Check latitude and longitude info\",new Error(\"Bad response from server. Fail to get weather info\");try{return await t.json()}catch(e){console.log(\"Error: \"+e)}},i=async function(e){const t=await fetch(\"https://api.weatherbit.io/v2.0/forecast/daily?lat=\"+e.lat.toString()+\"&lon=\"+e.lon.toString()+\"&key=c086327b5e2345ddb6a22055e7e275a8\");if(!t.ok)throw document.getElementById(\"error\").innerHTML=\"Unable to get weather info. Check latitude and longitude info\",new Error(\"Bad response from server. Fail to get weather info\");try{return await t.json()}catch(e){console.log(\"Error: \"+e)}},c=async function(e=\"\",t={}){const n=await fetch(e,{method:\"POST\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.log(\"Error\",e)}},d=async function(){try{const e=await fetch(\"/recent\"),t=await e.json(),n=await fetch(\"https://pixabay.com/api/?key=26197022-380369692144c45e27439b513&q=\"+t.city+\"&image_type=photo&orientation=horizontal\"),r=(await n.json()).hits[0].webformatURL;let a=document.createElement(\"div\"),o=document.createElement(\"img\"),i=document.createElement(\"div\");a.classList.add(\"entry\"),i.classList.add(\"weatherInfo\"),o.setAttribute(\"src\",r),o.setAttribute(\"alt\",t.city),o.classList.add(\"cityImage\"),a.appendChild(o);let c=document.createElement(\"div\"),d=document.createElement(\"div\"),l=document.createElement(\"div\"),u=document.createElement(\"div\"),s=document.createElement(\"div\");c.innerHTML=\"Departure Date: \"+t.date,d.innerHTML=`Location: ${t.city}, ${t.country}`,l.innerHTML=\"Weather: \"+t.weather,u.innerHTML=\"Temperature(C): \"+t.temp,s.innerHTML=\"Relative Humidity(%): \"+t.rh,i.appendChild(c),i.appendChild(d),i.appendChild(l),i.appendChild(u),i.appendChild(s);let p=document.createElement(\"button\");p.classList.add(\"deleteBtn\",\"btn\",\"btn-danger\"),p.innerHTML=\"Delete\",p.addEventListener(\"click\",(function(){this.parentNode.parentNode.remove()})),i.appendChild(p),a.appendChild(i),document.getElementById(\"schedule\").appendChild(a),document.getElementById(\"error\").innerHTML=\"\"}catch(e){console.log(\"Error: \",e)}}}]);","extractedComments":[]}